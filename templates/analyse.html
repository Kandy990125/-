<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no">
<title>性别分析</title>
    <script type="text/javascript" src="/static/tc/js/jquery-1.11.2.min.js"></script>
    <script type="text/javascript" src="/static/tc/js/login.js"></script>
    <script type="text/javascript" src="https://gallery.echartsjs.com/dep/echarts/map/js/china.js" ></script>
    <script src="/static/aliyun/script/jquery-1.11.1.min.js" type="text/javascript"></script>
    <script src="/static/aliyun/script/jquery.cookie.js" type="text/javascript"></script>
    <script src="/static/aliyun/bootstrap-3.3.5-dist/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="/static/js/echarts.min.js"></script>
    <script src="/static/js/jquery.js"></script>

    <link rel="stylesheet" type="text/css"  href="/static/tc/css/style.css"/>
    <link href="/static/aliyun/bootstrap-3.3.5-dist/css/bootstrap.min.css" title="" rel="stylesheet" />
    <link title="" href="/static/aliyun/css/style.css" rel="stylesheet" type="text/css"  />
    <link title="blue" href="/static/aliyun/css/dermadefault.css" rel="stylesheet" type="text/css"/>
    <link title="green" href="/static/aliyun/css/dermagreen.css" rel="stylesheet" type="text/css" disabled="disabled"/>
    <link title="orange" href="/static/aliyun/css/dermaorange.css" rel="stylesheet" type="text/css" disabled="disabled"/>
    <link href="/static/aliyun/css/templatecss.css" rel="stylesheet" title="" type="text/css" />
    <link rel="stylesheet" type="text/css" href="/static/recharge/css/amazeui.min.css" />
    <link rel="stylesheet" type="text/css" href="/static/recharge/css/main.css" />
</head>
<body>
    <nav class="nav navbar-default navbar-mystyle navbar-fixed-top">
        <div class="navbar-header">
            <button class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand mystyle-brand">
                <span class="glyphicon glyphicon-home"></span>
            </a>
        </div>
        <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li class="li-border">
                    <a class="mystyle-color" href="#">网络舆情管理中心</a>
                </li>
            </ul>
            <ul class="nav navbar-nav pull-right">
                <li class="dropdown li-border">
                    <a href="#" class="dropdown-toggle mystyle-color" data-toggle="dropdown">关于作者<span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="https://github.com/Kandy990125">GitHub</a>
                        </li>
                    </ul>
                </li>
                <li class="dropdown li-border">
                    <a href="#" class="dropdown-toggle mystyle-color" data-toggle="dropdown">{{ username }}<span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="/">退出</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle mystyle-color" data-toggle="dropdown">换肤<span class="caret"></span></a>
                    <ul class="dropdown-menu changecolor">
                        <li id="blue"><a href="#">蓝色</a></li>
                        <li class="divider"></li>
                        <li id="green"><a href="#">绿色</a></li>
                        <li class="divider"></li>
                        <li id="orange"><a href="#">橙色</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </nav>
    <div class="down-main">
        <div class="left-main left-full">
            <div class="sidebar-fold"><span class="glyphicon glyphicon-menu-hamburger"></span></div>
            <div class="subNavBox">
                <div class="sBox">
                    <div class="subNav sublist-down"><span class="title-icon glyphicon glyphicon-chevron-down"></span><span class="sublist-title">舆情分析</span></div>
                    <ul class="navContent" style="display:block">
                        <li>
                            <div class="showtitle" style="width:100px;"><img src="/static/aliyun/img/leftimg.png" />舆情分析</div>
                            <a href="/focus_index"><span class="sublist-icon glyphicon glyphicon-user"></span><span class="sub-title">关注指数</span></a>
                        </li>
                        <li>
                            <div class="showtitle" style="width:100px;"><img src="/static/aliyun/img/leftimg.png" />热点问题</div>
                            <a href="/keysentence"><span class="sublist-icon glyphicon glyphicon-user"></span><span class="sub-title">热点问题</span></a></li>
                        <li>
                            <div class="showtitle" style="width:100px;"><img src="/static/aliyun/img/leftimg.png" />网民情绪</div>
                            <a href="/snlp"><span class="sublist-icon glyphicon glyphicon-user"></span><span class="sub-title">网民情绪</span></a>
                        </li>
                    </ul>
                </div>
                <div class="sBox">
                    <div class="subNav sublist-down"><span class="title-icon glyphicon glyphicon-chevron-down"></span><span class="sublist-title">数据分析</span></div>
                    <ul class="navContent" style="display:block">
                        <li>
                            <div class="showtitle" style="width:100px;"><img src="/static/aliyun/img/leftimg.png" />关键词分析</div>
                            <a href="/keyword"><span class="sublist-icon glyphicon glyphicon-user"></span><span class="sub-title">关键词分析</span></a>
                        </li>
                        <li class="active">
                            <div class="showtitle" style="width:100px;"><img src="/static/aliyun/img/leftimg.png" />性别分析</div>
                            <a href="/analyse_page"><span class="sublist-icon glyphicon glyphicon-user"></span><span class="sub-title">性别分析</span></a>
                        </li>
                        <li>
                            <div class="showtitle" style="width:100px;"><img src="/static/aliyun/img/leftimg.png" />地域分析</div>
                            <a href="/analyse_page_place"><span class="sublist-icon glyphicon glyphicon-user"></span><span class="sub-title">地域分析</span></a>
                        </li>
                        <li >
                            <div class="showtitle" style="width:100px;"><img src="/static/aliyun/img/leftimg.png" />地域聚类</div>
                            <a href="/k_means/place"><span class="sublist-icon glyphicon glyphicon-user"></span><span class="sub-title">地域聚类</span></a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="right-product view-product right-full">
            <div class="container-fluid">
				<div class="manage account-manage info-center">
					<div class="page-header">
                        <div class="pull-left">
						    <h4>性别分析</h4>
                        </div>
                        <dl class="account-basic clearfix">
						    <div id="echartsmain" style="height:350px"></div>
                            <dd class="pull-left margin-large-left margin-small-top">
                                <p>男性关注人数：{{ male }}</p>
                                <p>女性关注人数：{{ female }}</p>
                            </dd>
					    </dl>

                    </div>
				</div>
		</div>
  </div>
</div>

    <script type="text/javascript">
             var  myChart = echarts.init(document.getElementById('echartsmain'));
              var arr1=[],arr2=[];
              var percent;
              function arrTest(){
                $.ajax({
                  type:"post",
                  async:false,
                  url:"/sex/json",
                  data:{},
                  dataType:"json",
                  success:function(result){
                    if (result) {
                      for (var i = 0; i < result.length; i++) {
                          arr1.push(result[i].性别);
                          arr2.push(result[i].数量);
                      }
                    }
                    percent = (arr2[1]/(arr2[0]+arr2[1])*100).toFixed(0); // 输出结果为 2.45
                  }
                })
                return arr1,arr2;
              }
              arrTest();
               var option = {
                    title: {
                        text: percent + '%',
                        x: '7%',
                        y: '42%',
                        textStyle: {
                            fontWeight: 'normal',
                            color: '#0580f2',
                            fontSize: '50'
                        }
                    },
                    color: ['rgba(176, 212, 251, 1)'],
                    legend: {
                        x:'left',
                        show: true,
                        itemGap: 12,
                        data: arr1
                    },

                    series: [{
                        name: 'Line 1',
                        type: 'pie',
                        clockWise: true,
                        radius: ['50%', '66%'],
                        center: ['12%', '50%'],//饼图位置控制
                        itemStyle: {
                            normal: {
                                label: {
                                    show: false
                                },
                                labelLine: {
                                    show: false
                                }
                            }
                        },
                        hoverAnimation: false,
                        data: [{
                            value: arr2[0],
                            name: arr1[0],
                            itemStyle: {
                                normal: {
                                    color: { // 完成的圆环的颜色
                                        colorStops: [{
                                            offset: 0,
                                            color: '#00cefc' // 0% 处的颜色
                                        }, {
                                            offset: 1,
                                            color: '#367bec' // 100% 处的颜色
                                        }]
                                    },
                                    label: {
                                        show: false
                                    },
                                    labelLine: {
                                        show: false
                                    }
                                }
                            }
                        }, {
                            name: arr1[1],
                            value: arr2[1]
                        }]
                    }]
                };
                // 为echarts对象加载数据
                myChart.setOption(option);
            // }
    </script>
<script type="text/javascript">
$(function(){
/*换肤*/
$(".dropdown .changecolor li").click(function(){
	var style = $(this).attr("id");
    $("link[title!='']").attr("disabled","disabled");
	$("link[title='"+style+"']").removeAttr("disabled");

	$.cookie('mystyle', style, { expires: 7 }); // 存储一个带7天期限的 cookie
})
var cookie_style = $.cookie("mystyle");
if(cookie_style!=null){
    $("link[title!='']").attr("disabled","disabled");
	$("link[title='"+cookie_style+"']").removeAttr("disabled");
}
/*左侧导航栏显示隐藏功能*/
$(".subNav").click(function(){
			/*显示*/
			if($(this).find("span:first-child").attr('class')=="title-icon glyphicon glyphicon-chevron-down")
			{
				$(this).find("span:first-child").removeClass("glyphicon-chevron-down");
			    $(this).find("span:first-child").addClass("glyphicon-chevron-up");
			    $(this).removeClass("sublist-down");
				$(this).addClass("sublist-up");
			}
			/*隐藏*/
			else
			{
				$(this).find("span:first-child").removeClass("glyphicon-chevron-up");
				$(this).find("span:first-child").addClass("glyphicon-chevron-down");
				$(this).removeClass("sublist-up");
				$(this).addClass("sublist-down");
			}
		// 修改数字控制速度， slideUp(500)控制卷起速度
	    $(this).next(".navContent").slideToggle(300).siblings(".navContent").slideUp(300);
	})
/*左侧导航栏缩进功能*/
$(".left-main .sidebar-fold").click(function(){

	if($(this).parent().attr('class')=="left-main left-full")
	{
		$(this).parent().removeClass("left-full");
		$(this).parent().addClass("left-off");

		$(this).parent().parent().find(".right-product").removeClass("right-full");
		$(this).parent().parent().find(".right-product").addClass("right-off");

		}
	else
	{
		$(this).parent().removeClass("left-off");
		$(this).parent().addClass("left-full");

		$(this).parent().parent().find(".right-product").removeClass("right-off");
		$(this).parent().parent().find(".right-product").addClass("right-full");

		}
	})

  /*左侧鼠标移入提示功能*/
		$(".sBox ul li").mouseenter(function(){
			if($(this).find("span:last-child").css("display")=="none")
			{$(this).find("div").show();}
			}).mouseleave(function(){$(this).find("div").hide();})
})
</script>
</body>
</html>
